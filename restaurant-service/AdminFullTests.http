### 1. ЛОГИН
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "admin@fooddelivery.com",
  "password": "admin123"
}

> {%
    client.global.set("admin_token", response.body.accessToken);
    client.log("✓ Token obtained");
%}

### 2. СОЗДАНИЕ РЕСТОРАНА
POST http://localhost:8082/api/restaurants
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Ресторан с Блюдами",
  "cuisine": "Тестовая",
  "address": "ул. Блюдная, 1"
}

> {%
    client.test("Create restaurant", function() {
        client.assert(response.status === 201, "Failed to create restaurant");
        client.global.set("restaurant_id", response.body.id);
        client.log("✓ Restaurant created: " + response.body.id);
    });
%}

### 3. СОЗДАНИЕ БЛЮДА (через restaurant-service)
POST http://localhost:8082/api/dishes
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Тестовое Блюдо 1",
  "description": "Первое тестовое блюдо",
  "price": 15.99,
  "imageUrl": "/images/test1.jpg",
  "restaurantId": {{restaurant_id}}
}

> {%
    client.test("Create dish", function() {
        client.log("Status: " + response.status);
        if (response.status === 201) {
            client.global.set("dish1_id", response.body.id);
            client.log("✓ Dish created: " + response.body.id);
        } else {
            client.log("Response: " + JSON.stringify(response.body));
        }
    });
%}

### 4. СОЗДАНИЕ ВТОРОГО БЛЮДА
POST http://localhost:8082/api/dishes
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Тестовое Блюдо 2",
  "description": "Второе тестовое блюдо",
  "price": 22.50,
  "imageUrl": "/images/test2.jpg",
  "restaurantId": {{restaurant_id}}
}

> {%
    client.test("Create second dish", function() {
        if (response.status === 201) {
            client.global.set("dish2_id", response.body.id);
            client.log("✓ Second dish created: " + response.body.id);
        }
    });
%}

### 5. ПОЛУЧЕНИЕ БЛЮД РЕСТОРАНА
GET http://localhost:8082/api/restaurants/{{restaurant_id}}/dishes?page=0&size=10
Accept: application/json

> {%
    client.test("Get restaurant dishes", function() {
        client.log("Status: " + response.status);
        if (response.status === 200) {
            client.log("✓ Dishes retrieved");
            client.log("Total dishes: " + response.body.totalElements);
        }
    });
%}


### 6. ПОЛУЧЕНИЕ ВСЕХ БЛЮД
GET http://localhost:8082/api/dishes?page=0&size=5
Accept: application/json

> {%
    client.test("Get all dishes", function() {
        client.log("Status: " + response.status);
        if (response.status === 200) {
            client.log("✓ All dishes retrieved");
        }
    });
%}
